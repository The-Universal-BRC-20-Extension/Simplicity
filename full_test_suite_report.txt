============================= test session starts ==============================
platform linux -- Python 3.11.2, pytest-8.4.1, pluggy-1.6.0 -- /home/indexer/.local/share/virtualenvs/simplicity-OFpnhncL/bin/python
cachedir: .pytest_cache
rootdir: /home/indexer/simplicity
plugins: docker-3.2.3, asyncio-1.0.0, anyio-4.9.0, cov-6.2.1
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 571 items

scripts/utilities/test_setup.py::test_imports PASSED                     [  0%]
scripts/utilities/test_setup.py::test_critical_rules_compliance PASSED   [  0%]
scripts/utilities/test_setup.py::test_database_schema PASSED             [  0%]
tests/integration/test_opi_integration.py::TestOpiIntegration::test_opi_registration_and_processing[postgresql] PASSED [  0%]
tests/integration/test_opi_integration.py::TestOpiIntegration::test_opi_operations_retrieval[postgresql] PASSED [  0%]
tests/integration/test_opi_integration.py::TestOpiIntegration::test_legacy_transfers_retrieval[postgresql] PASSED [  1%]
tests/integration/test_opi_integration.py::TestOpiIntegration::test_opi_error_handling[postgresql] PASSED [  1%]
tests/integration/test_opi_integration.py::TestOpiIntegration::test_opi_case_sensitivity[postgresql] PASSED [  1%]
tests/integration/test_opi_integration.py::TestOpiIntegration::test_empty_results_handling[postgresql] PASSED [  1%]
tests/integration/test_opi_integration.py::TestOpiIntegration::test_database_error_handling[postgresql] PASSED [  1%]
tests/integration/test_opi_integration.py::TestOpiIntegration::test_registry_error_handling[postgresql] PASSED [  1%]
tests/integration/test_real_validation.py::TestRealValidationIntegration::test_deploy_success_real_validation[postgresql] PASSED [  2%]
tests/integration/test_real_validation.py::TestRealValidationIntegration::test_deploy_blocked_by_legacy_real_validation[postgresql] PASSED [  2%]
tests/integration/test_real_validation.py::TestRealValidationIntegration::test_mint_success_real_validation[postgresql] PASSED [  2%]
tests/integration/test_real_validation.py::TestRealValidationIntegration::test_transfer_success_real_validation[postgresql] PASSED [  2%]
tests/integration/test_real_validation.py::TestRealValidationIntegration::test_validation_error_real_validation[postgresql] PASSED [  2%]
tests/test_api_integration.py::test_get_tickers[postgresql] PASSED       [  2%]
tests/test_api_integration.py::test_get_ticker_not_found[postgresql] PASSED [  3%]
tests/test_api_integration.py::test_get_ticker_success[postgresql] PASSED [  3%]
tests/test_api_integration.py::test_get_ticker_holders[postgresql] PASSED [  3%]
tests/test_api_integration.py::test_get_ticker_transactions[postgresql] PASSED [  3%]
tests/test_api_integration.py::test_get_address_balances[postgresql] PASSED [  3%]
tests/test_api_integration.py::test_get_address_transactions[postgresql] PASSED [  4%]
tests/test_api_integration.py::test_health_check[postgresql] PASSED      [  4%]
tests/test_api_integration.py::test_pagination_validation[postgresql] PASSED [  4%]
tests/test_api_integration.py::test_long_ticker_valid_but_not_found[postgresql] PASSED [  4%]
tests/test_api_integration.py::test_invalid_bitcoin_address[postgresql] PASSED [  4%]
tests/test_balance_management.py::TestBalanceManagement::test_balance_creation PASSED [  4%]
tests/test_balance_management.py::TestBalanceManagement::test_balance_get_existing PASSED [  5%]
tests/test_balance_management.py::TestBalanceManagement::test_balance_update_mint PASSED [  5%]
tests/test_balance_management.py::TestBalanceManagement::test_balance_update_transfer_sufficient PASSED [  5%]
tests/test_balance_management.py::TestBalanceManagement::test_balance_update_transfer_insufficient PASSED [  5%]
tests/test_balance_management.py::TestBalanceManagement::test_balance_update_transfer_exact PASSED [  5%]
tests/test_balance_management.py::TestBalanceManagement::test_balance_large_amounts PASSED [  5%]
tests/test_balance_management.py::TestBalanceManagement::test_balance_zero_operations PASSED [  6%]
tests/test_balance_management.py::TestBalanceManagement::test_get_total_supply_empty PASSED [  6%]
tests/test_balance_management.py::TestBalanceManagement::test_get_total_supply_with_balances PASSED [  6%]
tests/test_balance_management.py::TestBalanceManagement::test_balance_concurrent_access PASSED [  6%]
tests/test_balance_management.py::TestBalanceManagement::test_balance_string_amounts_only PASSED [  6%]
tests/test_balance_management.py::TestBalanceManagement::test_balance_decimal_amounts PASSED [  7%]
tests/test_balance_management.py::TestBalanceManagement::test_balance_precision_handling PASSED [  7%]
tests/test_brc20_classification.py::test_non_brc20_op_return_handling PASSED [  7%]
tests/test_brc20_classification.py::test_valid_json_invalid_protocol_handling PASSED [  7%]
tests/test_brc20_classification.py::test_non_json_op_return_handling PASSED [  7%]
tests/test_brc20_classification.py::test_valid_brc20_op_is_processed PASSED [  7%]
tests/test_brc20_classification.py::test_no_op_return_handling PASSED    [  8%]
tests/test_data_transformation.py::TestDataTransformation::test_transform_ticker_info PASSED [  8%]
tests/test_data_transformation.py::TestDataTransformation::test_transform_operation PASSED [  8%]
tests/test_data_transformation.py::TestDataTransformation::test_transform_address_balance PASSED [  8%]
tests/test_data_transformation.py::TestDataTransformation::test_transform_holder_info PASSED [  8%]
tests/test_data_transformation.py::TestDataTransformation::test_transform_transaction_operation PASSED [  8%]
tests/test_data_transformation.py::TestDataTransformation::test_transform_transaction_operation_mint PASSED [  9%]
tests/test_data_transformation.py::TestDataTransformation::test_transform_transaction_operation_deploy PASSED [  9%]
tests/test_data_transformation.py::TestDataTransformation::test_transform_transaction_operation_transfer PASSED [  9%]
tests/test_data_transformation.py::TestDataTransformation::test_transform_indexer_status PASSED [  9%]
tests/test_data_transformation.py::TestDataTransformation::test_transform_paginated_response PASSED [  9%]
tests/test_data_transformation.py::TestDataTransformation::test_transform_paginated_response_direct_list PASSED [  9%]
tests/test_data_transformation.py::TestDataTransformation::test_format_timestamp_unix PASSED [ 10%]
tests/test_data_transformation.py::TestDataTransformation::test_format_timestamp_datetime PASSED [ 10%]
tests/test_data_transformation.py::TestDataTransformation::test_format_timestamp_string PASSED [ 10%]
tests/test_data_transformation.py::TestDataTransformation::test_format_timestamp_string_with_z PASSED [ 10%]
tests/test_data_transformation.py::TestDataTransformation::test_format_timestamp_none PASSED [ 10%]
tests/test_data_transformation.py::TestDataTransformation::test_format_timestamp_invalid PASSED [ 11%]
tests/test_data_transformation.py::TestDataTransformation::test_calculate_remaining_supply PASSED [ 11%]
tests/test_data_transformation.py::TestDataTransformation::test_calculate_remaining_supply_zero PASSED [ 11%]
tests/test_data_transformation.py::TestDataTransformation::test_calculate_remaining_supply_exceeded PASSED [ 11%]
tests/test_data_transformation.py::TestDataTransformation::test_calculate_remaining_supply_invalid_input PASSED [ 11%]
tests/test_data_transformation.py::TestDataTransformation::test_add_ticker_to_holders PASSED [ 11%]
tests/test_data_transformation.py::TestDataTransformation::test_add_ticker_to_operations PASSED [ 12%]
tests/test_data_transformation.py::TestDataTransformation::test_transform_with_missing_fields PASSED [ 12%]
tests/test_data_transformation.py::TestDataTransformation::test_transform_empty_data PASSED [ 12%]
tests/test_deploy_validation_fix.py::TestDeployValidationFix::test_deploy_with_no_standard_outputs_is_valid PASSED [ 12%]
tests/test_deploy_validation_fix.py::TestDeployValidationFix::test_deploy_with_standard_outputs_is_also_valid PASSED [ 12%]
tests/test_deploy_validation_fix.py::TestDeployValidationFix::test_mint_with_no_standard_outputs_is_invalid PASSED [ 12%]
tests/test_deploy_validation_fix.py::TestDeployValidationFix::test_mint_with_standard_outputs_is_valid PASSED [ 13%]
tests/test_deploy_validation_fix.py::TestDeployValidationFix::test_transfer_with_no_standard_outputs_is_invalid PASSED [ 13%]
tests/test_error_handler.py::TestErrorHandler::test_handle_rpc_error PASSED [ 13%]
tests/test_error_handler.py::TestErrorHandler::test_handle_database_error PASSED [ 13%]
tests/test_error_handler.py::TestErrorHandler::test_handle_validation_error PASSED [ 13%]
tests/test_error_handler.py::TestErrorHandler::test_should_retry PASSED  [ 14%]
tests/test_error_handler.py::TestErrorHandler::test_get_retry_delay PASSED [ 14%]
tests/test_indexer.py::TestIndexerService::test_initialization PASSED    [ 14%]
tests/test_indexer.py::TestIndexerService::test_get_last_processed_height_no_blocks PASSED [ 14%]
tests/test_indexer.py::TestIndexerService::test_get_last_processed_height_with_blocks PASSED [ 14%]
tests/test_indexer.py::TestIndexerService::test_determine_start_height_fresh_start PASSED [ 14%]
tests/test_indexer.py::TestIndexerService::test_determine_start_height_resume PASSED [ 15%]
tests/test_indexer.py::TestIndexerService::test_is_block_processed_true PASSED [ 15%]
tests/test_indexer.py::TestIndexerService::test_is_block_processed_false_no_block PASSED [ 15%]
tests/test_indexer.py::TestIndexerService::test_is_block_processed_false_hash_mismatch PASSED [ 15%]
tests/test_indexer.py::TestIndexerService::test_verify_chain_continuity_true PASSED [ 15%]
tests/test_indexer.py::TestIndexerService::test_verify_chain_continuity_false PASSED [ 15%]
tests/test_indexer.py::TestIndexerService::test_detect_reorg_true PASSED [ 16%]
tests/test_indexer.py::TestIndexerService::test_detect_reorg_false PASSED [ 16%]
tests/test_indexer.py::TestIndexerService::test_detect_reorg_no_stored_block PASSED [ 16%]
tests/test_indexer.py::TestIndexerService::test_should_check_reorg_true PASSED [ 16%]
tests/test_indexer.py::TestIndexerService::test_should_check_reorg_false PASSED [ 16%]
tests/test_indexer.py::TestIndexerService::test_process_block_transactions_skip_coinbase PASSED [ 16%]
tests/test_indexer.py::TestIndexerService::test_process_block_transactions_with_operations PASSED [ 17%]
tests/test_indexer.py::TestIndexerService::test_process_block_success PASSED [ 17%]
tests/test_indexer.py::TestIndexerService::test_process_block_with_errors PASSED [ 17%]
tests/test_indexer.py::TestIndexerService::test_process_block_rpc_failure PASSED [ 17%]
tests/test_indexer.py::TestIndexerService::test_get_sync_status PASSED   [ 17%]
tests/test_indexer.py::TestIndexerService::test_get_sync_status_synced PASSED [ 18%]
tests/test_indexer.py::TestIndexerService::test_find_common_ancestor PASSED [ 18%]
tests/test_indexer.py::TestIndexerService::test_find_common_ancestor_max_depth PASSED [ 18%]
tests/test_indexer.py::TestIndexerServiceIntegration::test_start_indexing_small_range PASSED [ 18%]
tests/test_indexer.py::TestIndexerServiceIntegration::test_start_indexing_with_reorg PASSED [ 18%]
tests/test_integration.py::TestIntegration::test_complete_token_lifecycle PASSED [ 18%]
tests/test_integration.py::TestIntegration::test_multiple_mints_same_block PASSED [ 19%]
tests/test_integration.py::TestIntegration::test_transfer_entire_balance PASSED [ 19%]
tests/test_integration.py::TestIntegration::test_transfer_amount_exceeding_mint_limit PASSED [ 19%]
tests/test_integration.py::TestIntegration::test_invalid_operations_logged PASSED [ 19%]
tests/test_integration.py::TestIntegration::test_complex_transaction_processing PASSED [ 19%]
tests/test_integration.py::TestIntegration::test_error_handling_during_processing PASSED [ 19%]
tests/test_marketplace_transfers.py::TestMarketplaceTransfers::test_early_marketplace_invalid_inputs PASSED [ 20%]
tests/test_marketplace_transfers.py::TestMarketplaceTransfers::test_early_marketplace_valid PASSED [ 20%]
tests/test_marketplace_transfers.py::TestMarketplaceTransfers::test_new_marketplace_invalid_address_mismatch PASSED [ 20%]
tests/test_marketplace_transfers.py::TestMarketplaceTransfers::test_new_marketplace_valid PASSED [ 20%]
tests/test_marketplace_transfers.py::TestMarketplaceTransfers::test_sighash_extraction PASSED [ 20%]
tests/test_marketplace_transfers.py::TestMarketplaceTransfers::test_signature_extraction_empty PASSED [ 21%]
tests/test_marketplace_transfers.py::TestMarketplaceTransfers::test_signature_extraction_empty_witness PASSED [ 21%]
tests/test_marketplace_transfers.py::TestMarketplaceTransfers::test_signature_extraction_legacy PASSED [ 21%]
tests/test_marketplace_transfers.py::TestMarketplaceTransfers::test_signature_extraction_malformed_scriptSig PASSED [ 21%]
tests/test_marketplace_transfers.py::TestMarketplaceTransfers::test_signature_extraction_segwit PASSED [ 21%]
tests/test_marketplace_transfers.py::TestMarketplaceTransfers::test_signature_extraction_taproot PASSED [ 21%]
tests/test_models.py::test_models_import PASSED                          [ 22%]
tests/test_models.py::test_deploy_model PASSED                           [ 22%]
tests/test_models.py::test_balance_model PASSED                          [ 22%]
tests/test_models.py::test_brc20_operation_model PASSED                  [ 22%]
tests/test_models.py::test_brc20_operation_invalid PASSED                [ 22%]
tests/test_models.py::test_processed_block_model PASSED                  [ 22%]
tests/test_models.py::test_critical_rules_compliance PASSED              [ 23%]
tests/test_op_migration.py::TestOpMigration::test_op_model_new_field_names PASSED [ 23%]
tests/test_op_migration.py::TestOpMigration::test_op_model_rejects_old_field_names PASSED [ 23%]
tests/test_op_migration.py::TestOpMigration::test_calculation_service_map_operation_to_op_model PASSED [ 23%]
tests/test_op_migration.py::TestOpMigration::test_data_transformation_service_new_format PASSED [ 23%]
tests/test_op_migration.py::TestOpMigration::test_calculation_service_functions_return_new_format PASSED [ 23%]
tests/test_op_migration.py::TestOpMigration::test_no_extra_fields_in_op_model PASSED [ 24%]
tests/test_op_migration.py::TestOpMigration::test_op_model_serialization PASSED [ 24%]
tests/test_opi_000_implementation.py::TestOpi000Implementation::test_implementation_initialization PASSED [ 24%]
tests/test_opi_000_implementation.py::TestOpi000Implementation::test_parse_operation_minimal_payload PASSED [ 24%]
tests/test_opi_000_implementation.py::TestOpi000Implementation::test_implementation_registration PASSED [ 24%]
tests/test_opi_000_implementation.py::TestOpi000Validation::test_validate_operation_missing_txid PASSED [ 25%]
tests/test_opi_000_implementation.py::TestOpi000Validation::test_validate_operation_missing_block_height PASSED [ 25%]
tests/test_opi_000_implementation.py::TestOpi000Validation::test_validate_operation_missing_both_txid_and_height PASSED [ 25%]
tests/test_opi_000_implementation.py::TestOpi000Validation::test_validate_operation_no_legacy_transfer_found PASSED [ 25%]
tests/test_opi_000_implementation.py::TestOpi000Validation::test_validate_operation_invalid_legacy_event_missing_to_pkscript PASSED [ 25%]
tests/test_opi_000_implementation.py::TestOpi000Validation::test_validate_operation_invalid_recipient_address PASSED [ 25%]
tests/test_opi_000_implementation.py::TestOpi000Validation::test_validate_operation_missing_required_fields PASSED [ 26%]
tests/test_opi_000_implementation.py::TestOpi000Validation::test_validate_operation_success PASSED [ 26%]
tests/test_opi_000_implementation.py::TestOpi000Processing::test_process_operation_no_validated_event PASSED [ 26%]
tests/test_opi_000_implementation.py::TestOpi000Processing::test_process_operation_missing_legacy_fields PASSED [ 26%]
tests/test_opi_000_implementation.py::TestOpi000Processing::test_process_operation_success PASSED [ 26%]
tests/test_opi_000_implementation.py::TestOpi000Processing::test_process_operation_address_extraction_failure PASSED [ 26%]
tests/test_opi_000_implementation.py::TestOpi000Processing::test_process_operation_state_cleanup PASSED [ 27%]
tests/test_opi_000_implementation.py::TestLegacyTransferService::test_service_initialization PASSED [ 27%]
tests/test_opi_000_implementation.py::TestLegacyTransferService::test_service_initialization_custom_url PASSED [ 27%]
tests/test_opi_000_implementation.py::TestLegacyTransferService::test_get_transfer_event_for_tx_success PASSED [ 27%]
tests/test_opi_000_implementation.py::TestLegacyTransferService::test_get_transfer_event_for_tx_no_matching_event PASSED [ 27%]
tests/test_opi_000_implementation.py::TestLegacyTransferService::test_get_transfer_event_for_tx_wrong_event_type PASSED [ 28%]
tests/test_opi_000_implementation.py::TestLegacyTransferService::test_get_transfer_event_for_tx_missing_event_data PASSED [ 28%]
tests/test_opi_000_implementation.py::TestLegacyTransferService::test_get_transfer_event_for_tx_api_error PASSED [ 28%]
tests/test_opi_000_implementation.py::TestLegacyTransferService::test_get_transfer_event_for_tx_request_error PASSED [ 28%]
tests/test_opi_000_implementation.py::TestOpi000ErrorHandling::test_validation_error_codes PASSED [ 28%]
tests/test_opi_000_implementation.py::TestOpi000ErrorHandling::test_processing_error_cleanup PASSED [ 28%]
tests/test_opi_000_implementation.py::TestOpi000APIEndpoints::test_get_api_endpoints PASSED [ 29%]
tests/test_opi_000_implementation.py::TestOpi000APIEndpoints::test_list_no_return_transactions_endpoint PASSED [ 29%]
tests/test_opi_000_implementation.py::TestOpi000APIEndpoints::test_list_no_return_transactions_database_error PASSED [ 29%]
tests/test_opi_000_implementation.py::TestOpi000Integration::test_complete_no_return_workflow PASSED [ 29%]
tests/test_opi_api.py::TestOPIAPIEndpoints::test_list_opis_endpoint[postgresql] PASSED [ 29%]
tests/test_opi_api.py::TestOPIAPIEndpoints::test_get_opi_details_endpoint[postgresql] PASSED [ 29%]
tests/test_opi_api.py::TestOPIAPIEndpoints::test_get_opi_details_not_found[postgresql] PASSED [ 30%]
tests/test_opi_api.py::TestOPIAPIEndpoints::test_list_no_return_transactions_endpoint[postgresql] PASSED [ 30%]
tests/test_opi_api.py::TestOPIAPIEndpoints::test_list_no_return_transactions_with_data[postgresql] PASSED [ 30%]
tests/test_opi_api.py::TestOPIAPIEndpoints::test_list_no_return_transactions_pagination[postgresql] PASSED [ 30%]
tests/test_opi_api.py::TestOPIAPIEndpoints::test_get_no_return_transfer_data_endpoint[postgresql] PASSED [ 30%]
tests/test_opi_api.py::TestOPIAPIEndpoints::test_get_no_return_transfer_data_not_found[postgresql] PASSED [ 30%]
tests/test_opi_api.py::TestOPIAPIEndpoints::test_get_no_return_transfer_data_invalid_txid[postgresql] PASSED [ 31%]
tests/test_opi_api.py::TestOPIAPIErrorHandling::test_get_opi_details_database_connection_error[postgresql] PASSED [ 31%]
tests/test_opi_api.py::TestOPIAPIErrorHandling::test_list_no_return_transactions_invalid_pagination[postgresql] PASSED [ 31%]
tests/test_opi_api.py::TestOPIAPIErrorHandling::test_get_opi_details_malformed_opi_id[postgresql] PASSED [ 31%]
tests/test_opi_api.py::TestOPIAPIResponseFormat::test_list_opis_response_format[postgresql] PASSED [ 31%]
tests/test_opi_api.py::TestOPIAPIResponseFormat::test_get_opi_details_response_format[postgresql] PASSED [ 32%]
tests/test_opi_api.py::TestOPIAPIResponseFormat::test_list_no_return_transactions_response_format[postgresql] PASSED [ 32%]
tests/test_opi_api.py::TestOPIAPISecurity::test_sql_injection_prevention[postgresql] PASSED [ 32%]
tests/test_opi_api.py::TestOPIAPISecurity::test_input_validation[postgresql] PASSED [ 32%]
tests/test_opi_api.py::TestOPIAPISecurity::test_error_message_sanitization[postgresql] PASSED [ 32%]
tests/test_opi_api.py::TestOPI000SpecificEndpoints::test_list_no_return_transactions_success[postgresql] PASSED [ 32%]
tests/test_opi_api.py::TestOPI000SpecificEndpoints::test_list_no_return_transactions_database_error[postgresql] PASSED [ 33%]
tests/test_opi_framework.py::TestOPIRegistry::test_registry_initialization PASSED [ 33%]
tests/test_opi_framework.py::TestOPIRegistry::test_register_opi PASSED   [ 33%]
tests/test_opi_framework.py::TestOPIRegistry::test_register_opi_duplicate PASSED [ 33%]
tests/test_opi_framework.py::TestOPIRegistry::test_get_opi_case_insensitive PASSED [ 33%]
tests/test_opi_framework.py::TestOPIRegistry::test_get_opi PASSED        [ 33%]
tests/test_opi_framework.py::TestOPIRegistry::test_get_opi_not_found PASSED [ 34%]
tests/test_opi_framework.py::TestOPIRegistry::test_unregister_opi PASSED [ 34%]
tests/test_opi_framework.py::TestOPIRegistry::test_unregister_opi_not_found PASSED [ 34%]
tests/test_opi_framework.py::TestOPIRegistry::test_list_opis PASSED      [ 34%]
tests/test_opi_framework.py::TestOPIInterface::test_opi_interface_implementation PASSED [ 34%]
tests/test_opi_framework.py::TestOPIInterface::test_opi_interface_methods_return_correct_types PASSED [ 35%]
tests/test_opi_framework.py::TestOPIProcessor::test_processor_initialization PASSED [ 35%]
tests/test_opi_framework.py::TestOPIProcessor::test_process_if_opi_no_return_detection PASSED [ 35%]
tests/test_opi_framework.py::TestOPIProcessor::test_process_if_opi_no_return_validation_failure PASSED [ 35%]
tests/test_opi_framework.py::TestOPIProcessor::test_process_if_opi_no_return_processing_success PASSED [ 35%]
tests/test_opi_framework.py::TestOPIProcessor::test_process_if_opi_no_return_not_registered PASSED [ 35%]
tests/test_opi_framework.py::TestOPIProcessor::test_process_if_opi_non_opi_operation PASSED [ 36%]
tests/test_opi_framework.py::TestOPIProcessor::test_process_if_opi_missing_op_type PASSED [ 36%]
tests/test_opi_framework.py::TestOPIProcessor::test_process_if_opi_empty_operation PASSED [ 36%]
tests/test_opi_framework.py::TestOPIProcessorIntegration::test_process_if_opi_with_real_opi_implementation PASSED [ 36%]
tests/test_opi_framework.py::TestOPIProcessorIntegration::test_processor_performance PASSED [ 36%]
tests/test_opi_framework.py::TestOPIProcessorIntegration::test_processor_error_handling PASSED [ 36%]
tests/test_opi_framework.py::TestOPIProcessorIntegration::test_processor_database_session_preservation PASSED [ 37%]
tests/test_opi_framework.py::TestOPIFrameworkErrorHandling::test_registry_error_handling PASSED [ 37%]
tests/test_opi_framework.py::TestOPIFrameworkErrorHandling::test_processor_error_handling PASSED [ 37%]
tests/test_opi_framework.py::TestOPIFrameworkErrorHandling::test_processor_processing_error_handling PASSED [ 37%]
tests/test_opi_framework.py::TestOPIFrameworkPerformance::test_registry_performance PASSED [ 37%]
tests/test_opi_framework.py::TestOPIFrameworkPerformance::test_processor_performance_with_mocks PASSED [ 38%]
tests/test_opi_framework.py::TestOPIFrameworkPerformance::test_processor_performance_with_validation_failure PASSED [ 38%]
tests/test_opi_integration.py::TestOPIEndToEndWorkflow::test_complete_no_return_workflow_success PASSED [ 38%]
tests/test_opi_integration.py::TestOPIEndToEndWorkflow::test_complete_no_return_workflow_validation_failure PASSED [ 38%]
tests/test_opi_integration.py::TestOPIEndToEndWorkflow::test_complete_no_return_workflow_processing_failure PASSED [ 38%]
tests/test_opi_integration.py::TestOPIEndToEndWorkflow::test_complete_no_return_workflow_state_cleanup PASSED [ 38%]
tests/test_opi_integration.py::TestOPIEndToEndWorkflow::test_complete_no_return_workflow_performance PASSED [ 39%]
tests/test_opi_integration.py::TestOPIProcessorIntegration::test_opi_processor_integration_with_main_processor PASSED [ 39%]
tests/test_opi_integration.py::TestOPIProcessorIntegration::test_opi_processor_ignores_non_opi_operations PASSED [ 39%]
tests/test_opi_integration.py::TestOPIProcessorIntegration::test_opi_processor_validation_result_propagation PASSED [ 39%]
tests/test_opi_integration.py::TestOPIProcessorIntegration::test_opi_processor_handles_unregistered_opi PASSED [ 39%]
tests/test_opi_integration.py::TestOPIProcessorIntegration::test_opi_processor_handles_missing_op_type PASSED [ 39%]
tests/test_opi_integration.py::TestOPIProcessorIntegration::test_opi_processor_handles_empty_operation PASSED [ 40%]
tests/test_opi_integration.py::TestOPIStateConsistency::test_opi_implementation_state_cleanup PASSED [ 40%]
tests/test_opi_integration.py::TestOPIStateConsistency::test_opi_implementation_state_cleanup_on_error PASSED [ 40%]
tests/test_opi_integration.py::TestOPIStateConsistency::test_opi_implementation_state_cleanup_on_validation_error PASSED [ 40%]
tests/test_opi_models.py::TestOPIOperationModel::test_opi_operation_creation PASSED [ 40%]
tests/test_opi_models.py::TestOPIOperationModel::test_opi_operation_required_fields PASSED [ 40%]
tests/test_opi_models.py::TestOPIOperationModel::test_opi_operation_json_fields PASSED [ 41%]
tests/test_opi_models.py::TestOPIOperationModel::test_opi_operation_optional_fields PASSED [ 41%]
tests/test_opi_models.py::TestOPIOperationModel::test_opi_operation_foreign_key_relationship PASSED [ 41%]
tests/test_opi_models.py::TestOPIOperationModel::test_opi_operation_timestamps PASSED [ 41%]
tests/test_opi_models.py::TestOPIOperationModel::test_opi_operation_table_name PASSED [ 41%]
tests/test_opi_models.py::TestOPIOperationModel::test_opi_operation_unique_constraint PASSED [ 42%]
tests/test_opi_models.py::TestOPIOperationModel::test_opi_operation_indexes PASSED [ 42%]
tests/test_opi_models.py::TestOPIOperationModel::test_opi_operation_string_representation PASSED [ 42%]
tests/test_opi_models.py::TestOPIOperationModel::test_opi_operation_data_types PASSED [ 42%]
tests/test_opi_models.py::TestOPIOperationModel::test_opi_operation_field_lengths PASSED [ 42%]
tests/test_opi_models.py::TestOPIOperationModel::test_opi_operation_nullable_fields PASSED [ 42%]
tests/test_opi_models.py::TestOPIConfigurationModel::test_opi_configuration_creation PASSED [ 43%]
tests/test_opi_models.py::TestOPIConfigurationModel::test_opi_configuration_required_fields PASSED [ 43%]
tests/test_opi_models.py::TestOPIConfigurationModel::test_opi_configuration_optional_fields PASSED [ 43%]
tests/test_opi_models.py::TestOPIConfigurationModel::test_opi_configuration_json_field PASSED [ 43%]
tests/test_opi_models.py::TestOPIConfigurationModel::test_opi_configuration_enabled_state PASSED [ 43%]
tests/test_opi_models.py::TestOPIConfigurationModel::test_opi_configuration_version_management PASSED [ 43%]
tests/test_opi_models.py::TestOPIConfigurationModel::test_opi_configuration_timestamps PASSED [ 44%]
tests/test_opi_models.py::TestOPIConfigurationModel::test_opi_configuration_table_name PASSED [ 44%]
tests/test_opi_models.py::TestOPIConfigurationModel::test_opi_configuration_unique_constraint PASSED [ 44%]
tests/test_opi_models.py::TestOPIConfigurationModel::test_opi_configuration_string_representation PASSED [ 44%]
tests/test_opi_models.py::TestOPIConfigurationModel::test_opi_configuration_data_types PASSED [ 44%]
tests/test_opi_models.py::TestOPIConfigurationModel::test_opi_configuration_field_lengths PASSED [ 45%]
tests/test_opi_models.py::TestOPIConfigurationModel::test_opi_configuration_nullable_fields PASSED [ 45%]
tests/test_opi_models.py::TestOPIModelsDatabaseOperations::test_opi_operation_database_insert PASSED [ 45%]
tests/test_opi_models.py::TestOPIModelsDatabaseOperations::test_opi_configuration_database_insert PASSED [ 45%]
tests/test_opi_models.py::TestOPIModelsDatabaseOperations::test_opi_operation_query_operations PASSED [ 45%]
tests/test_opi_models.py::TestOPIModelsDatabaseOperations::test_opi_configuration_query_operations PASSED [ 45%]
tests/test_opi_models.py::TestOPIModelsDatabaseOperations::test_opi_operation_unique_constraint_violation PASSED [ 46%]
tests/test_opi_models.py::TestOPIModelsDatabaseOperations::test_opi_configuration_unique_constraint_violation PASSED [ 46%]
tests/test_opi_models.py::TestOPIModelsRelationships::test_opi_operation_brc20_operation_relationship PASSED [ 46%]
tests/test_opi_models.py::TestOPIModelsRelationships::test_opi_operation_foreign_key_null PASSED [ 46%]
tests/test_opi_models.py::TestOPIModelsValidation::test_opi_operation_field_validation PASSED [ 46%]
tests/test_opi_models.py::TestOPIModelsValidation::test_opi_configuration_field_validation PASSED [ 46%]
tests/test_opi_models.py::TestOPIModelsValidation::test_opi_operation_json_validation PASSED [ 47%]
tests/test_opi_models.py::TestOPIModelsValidation::test_opi_configuration_json_validation PASSED [ 47%]
tests/test_opi_models.py::TestOPIModelsPerformance::test_opi_operation_creation_performance PASSED [ 47%]
tests/test_opi_models.py::TestOPIModelsPerformance::test_opi_configuration_creation_performance PASSED [ 47%]
tests/test_parser.py::TestBRC20Parser::test_extract_op_return_valid_single PASSED [ 47%]
tests/test_parser.py::TestBRC20Parser::test_extract_op_return_multiple_rejection PASSED [ 47%]
tests/test_parser.py::TestBRC20Parser::test_extract_op_return_no_op_return PASSED [ 48%]
tests/test_parser.py::TestBRC20Parser::test_parse_valid_deploy PASSED    [ 48%]
tests/test_parser.py::TestBRC20Parser::test_parse_valid_mint PASSED      [ 48%]
tests/test_parser.py::TestBRC20Parser::test_parse_valid_transfer PASSED  [ 48%]
tests/test_parser.py::TestBRC20Parser::test_parse_invalid_json PASSED    [ 48%]
tests/test_parser.py::TestBRC20Parser::test_parse_empty_ticker_invalid PASSED [ 49%]
tests/test_parser.py::TestBRC20Parser::test_parse_zero_ticker_valid PASSED [ 49%]
tests/test_parser.py::TestBRC20Parser::test_validate_ticker_format PASSED [ 49%]
tests/test_parser.py::TestBRC20Parser::test_validate_json_structure_missing_protocol PASSED [ 49%]
tests/test_parser.py::TestBRC20Parser::test_validate_json_structure_invalid_protocol PASSED [ 49%]
tests/test_parser.py::TestBRC20Parser::test_validate_json_structure_missing_operation PASSED [ 49%]
tests/test_parser.py::TestBRC20Parser::test_validate_json_structure_invalid_operation PASSED [ 50%]
tests/test_parser.py::TestBRC20Parser::test_validate_json_structure_missing_ticker PASSED [ 50%]
tests/test_parser.py::TestBRC20Parser::test_validate_deploy_fields_missing_max_supply PASSED [ 50%]
tests/test_parser.py::TestBRC20Parser::test_validate_deploy_fields_invalid_max_supply_type PASSED [ 50%]
tests/test_parser.py::TestBRC20Parser::test_validate_deploy_fields_max_lim_format PASSED [ 50%]
tests/test_parser.py::TestBRC20Parser::test_validate_deploy_fields_mixed_format_error PASSED [ 50%]
tests/test_parser.py::TestBRC20Parser::test_validate_deploy_fields_mixed_format_error_2 PASSED [ 51%]
tests/test_parser.py::TestBRC20Parser::test_validate_mint_fields_missing_amount PASSED [ 51%]
tests/test_parser.py::TestBRC20Parser::test_validate_transfer_fields_missing_amount PASSED [ 51%]
tests/test_parser.py::TestBRC20Parser::test_parse_transaction_complete_valid PASSED [ 51%]
tests/test_parser.py::TestBRC20Parser::test_parse_transaction_multiple_op_returns PASSED [ 51%]
tests/test_parser.py::TestBRC20Parser::test_parse_transaction_invalid_brc20 PASSED [ 52%]
tests/test_parser.py::TestBRC20Parser::test_parse_transaction_no_op_return PASSED [ 52%]
tests/test_parser.py::TestBRC20Parser::test_op_return_size_limit PASSED  [ 52%]
tests/test_parser.py::TestBRC20Parser::test_extract_op_return_first_position_valid_mint PASSED [ 52%]
tests/test_parser.py::TestBRC20Parser::test_extract_op_return_first_position_valid_transfer PASSED [ 52%]
tests/test_parser.py::TestBRC20Parser::test_deploy_op_return_any_position_still_valid PASSED [ 52%]
tests/test_parser.py::TestBRC20Parser::test_extract_op_return_second_position_invalid_mint PASSED [ 53%]
tests/test_parser.py::TestBRC20Parser::test_extract_op_return_second_position_invalid_transfer PASSED [ 53%]
tests/test_parser.py::TestBRC20Parser::test_extract_op_return_third_position_invalid PASSED [ 53%]
tests/test_parser.py::TestBRC20Parser::test_extract_op_return_multiple_with_first_invalid PASSED [ 53%]
tests/test_performance.py::test_endpoint_performance[postgresql] PASSED  [ 53%]
tests/test_performance.py::test_ticker_endpoint_performance[postgresql] PASSED [ 53%]
tests/test_performance.py::test_address_endpoint_performance[postgresql] PASSED [ 54%]
tests/test_performance.py::test_pagination_performance[postgresql] PASSED [ 54%]
tests/test_performance.py::test_concurrent_requests_performance[postgresql] PASSED [ 54%]
tests/test_processor.py::TestBRC20Processor::test_process_deploy_success PASSED [ 54%]
tests/test_processor.py::TestBRC20Processor::test_process_deploy_duplicate_ticker PASSED [ 54%]
tests/test_processor.py::TestBRC20Processor::test_process_mint_within_limits PASSED [ 54%]
tests/test_processor.py::TestBRC20Processor::test_process_mint_exceeds_supply PASSED [ 55%]
tests/test_processor.py::TestBRC20Processor::test_process_mint_exceeds_per_op_limit PASSED [ 55%]
tests/test_processor.py::TestBRC20Processor::test_mint_op_return_position_before_block_height PASSED [ 55%]
tests/test_processor.py::TestBRC20Processor::test_mint_op_return_position_after_block_height_valid PASSED [ 55%]
tests/test_processor.py::TestBRC20Processor::test_mint_op_return_position_after_block_height_invalid PASSED [ 55%]
tests/test_processor.py::TestBRC20Processor::test_process_transfer_sufficient_balance PASSED [ 56%]
tests/test_processor.py::TestBRC20Processor::test_process_transfer_insufficient_balance PASSED [ 56%]
tests/test_processor.py::TestBRC20Processor::test_process_transfer_exceeds_mint_limit PASSED [ 56%]
tests/test_processor.py::TestBRC20Processor::test_allocation_first_standard_output PASSED [ 56%]
tests/test_processor.py::TestBRC20Processor::test_allocation_skip_op_return PASSED [ 56%]
tests/test_processor.py::TestBRC20Processor::test_allocation_multiple_outputs PASSED [ 56%]
tests/test_processor.py::TestBRC20Processor::test_atomic_rollback PASSED [ 57%]
tests/test_processor.py::TestBRC20Processor::test_log_all_operations PASSED [ 57%]
tests/test_processor.py::TestBRC20Processor::test_update_balance_mint PASSED [ 57%]
tests/test_processor.py::TestBRC20Processor::test_update_balance_transfer_debit PASSED [ 57%]
tests/test_processor.py::TestBRC20Processor::test_update_balance_insufficient_funds PASSED [ 57%]
tests/test_processor.py::TestBRC20Processor::test_classify_transfer_type_simple PASSED [ 57%]
tests/test_processor.py::TestBRC20Processor::test_classify_transfer_type_valid_marketplace PASSED [ 58%]
tests/test_processor.py::TestBRC20Processor::test_classify_transfer_type_invalid_marketplace PASSED [ 58%]
tests/test_processor.py::TestBRC20Processor::test_invalid_marketplace_early_return_performance PASSED [ 58%]
tests/test_processor.py::TestBRC20Processor::test_process_transfer_with_type_logging PASSED [ 58%]
tests/test_processor.py::TestBRC20Processor::test_marketplace_transfer_op_return_any_position_valid PASSED [ 58%]
tests/test_processor.py::TestBRC20Processor::test_simple_transfer_op_return_not_first_position_invalid PASSED [ 59%]
tests/test_processor.py::TestBRC20Processor::test_process_deploy_blocked_by_legacy PASSED [ 59%]
tests/test_processor.py::TestBRC20Processor::test_process_deploy_allowed_when_not_on_legacy PASSED [ 59%]
tests/test_processor.py::TestBRC20Processor::test_process_deploy_success_real_integration[postgresql] PASSED [ 59%]
tests/test_processor.py::TestBRC20Processor::test_process_deploy_blocked_by_legacy_real_integration[postgresql] PASSED [ 59%]
tests/test_processor.py::TestBRC20Processor::test_process_mint_real_integration[postgresql] PASSED [ 59%]
tests/test_processor.py::TestBRC20Processor::test_process_transfer_real_integration[postgresql] PASSED [ 60%]
tests/test_reorg_handler.py::TestReorgHandler::test_find_common_ancestor PASSED [ 60%]
tests/test_reorg_handler.py::TestReorgHandler::test_rollback_to_height PASSED [ 60%]
tests/test_reorg_handler.py::TestReorgHandler::test_handle_reorg PASSED  [ 60%]
tests/test_timestamp_fix.py::TestTimestampFix::test_convert_block_timestamp_success PASSED [ 60%]
tests/test_timestamp_fix.py::TestTimestampFix::test_convert_block_timestamp_invalid_type PASSED [ 60%]
tests/test_timestamp_fix.py::TestTimestampFix::test_convert_block_timestamp_negative PASSED [ 61%]
tests/test_timestamp_fix.py::TestTimestampFix::test_convert_block_timestamp_before_genesis PASSED [ 61%]
tests/test_timestamp_fix.py::TestTimestampFix::test_convert_block_timestamp_far_future PASSED [ 61%]
tests/test_timestamp_fix.py::TestTimestampFix::test_process_transaction_with_timestamp PASSED [ 61%]
tests/test_timestamp_fix.py::TestTimestampFix::test_process_deploy_with_bitcoin_timestamp PASSED [ 61%]
tests/test_timestamp_fix.py::TestTimestampFix::test_log_operation_with_bitcoin_timestamp PASSED [ 61%]
tests/test_timestamp_fix.py::TestTimestampFix::test_indexer_processes_block_with_timestamp PASSED [ 62%]
tests/test_timestamp_fix.py::TestTimestampFix::test_indexer_handles_missing_timestamp PASSED [ 62%]
tests/test_timestamp_fix.py::TestTimestampFix::test_timestamp_conversion_performance PASSED [ 62%]
tests/test_timestamp_fix.py::TestTimestampFix::test_known_bitcoin_blocks_timestamps PASSED [ 62%]
tests/test_timestamp_fix.py::TestTimestampFix::test_enterprise_logging_on_errors PASSED [ 62%]
tests/test_timestamp_fix.py::TestTimestampFix::test_process_transaction_invalid_timestamp PASSED [ 63%]
tests/test_timestamp_fix.py::TestTimestampFix::test_log_operation_timestamp_fallback PASSED [ 63%]
tests/test_utxo_resolution.py::test_utxo_resolution_service_get_input_address PASSED [ 63%]
tests/test_utxo_resolution.py::test_processor_get_first_input_address PASSED [ 63%]
tests/test_utxo_resolution.py::test_deployer_first_input_fallback PASSED [ 63%]
tests/test_utxo_resolution.py::test_deployer_output_after_op_return PASSED [ 63%]
tests/test_utxo_resolution.py::test_deployer_first_input_fallback_real_integration[postgresql] PASSED [ 64%]
tests/test_utxo_resolution.py::test_deployer_output_after_op_return_real_integration[postgresql] PASSED [ 64%]
tests/test_utxo_resolution.py::test_transfer_input_resolution_real_integration[postgresql] PASSED [ 64%]
tests/test_validator.py::TestBRC20Validator::test_validate_deploy_new_ticker PASSED [ 64%]
tests/test_validator.py::TestBRC20Validator::test_validate_deploy_existing_ticker PASSED [ 64%]
tests/test_validator.py::TestBRC20Validator::test_validate_deploy_invalid_max_supply PASSED [ 64%]
tests/test_validator.py::TestBRC20Validator::test_validate_mint_valid PASSED [ 65%]
tests/test_validator.py::TestBRC20Validator::test_validate_mint_no_deploy PASSED [ 65%]
tests/test_validator.py::TestBRC20Validator::test_validate_mint_exceeds_limit PASSED [ 65%]
tests/test_validator.py::TestBRC20Validator::test_validate_mint_exceeds_max_supply PASSED [ 65%]
tests/test_validator.py::TestBRC20Validator::test_validate_transfer_valid PASSED [ 65%]
tests/test_validator.py::TestBRC20Validator::test_validate_transfer_insufficient_balance PASSED [ 66%]
tests/test_validator.py::TestBRC20Validator::test_validate_transfer_no_deploy PASSED [ 66%]
tests/test_validator.py::TestBRC20Validator::test_validate_transfer_can_exceed_mint_limit PASSED [ 66%]
tests/test_validator.py::TestBRC20Validator::test_validate_output_addresses_valid PASSED [ 66%]
tests/test_validator.py::TestBRC20Validator::test_validate_output_addresses_no_standard_outputs PASSED [ 66%]
tests/test_validator.py::TestBRC20Validator::test_get_first_standard_output_address PASSED [ 66%]
tests/test_validator.py::TestBRC20Validator::test_get_current_supply PASSED [ 67%]
tests/test_validator.py::TestBRC20Validator::test_get_balance PASSED     [ 67%]
tests/test_validator.py::TestBRC20Validator::test_get_balance_not_found PASSED [ 67%]
tests/test_validator.py::TestBRC20Validator::test_get_deploy_record PASSED [ 67%]
tests/test_validator.py::TestBRC20Validator::test_validate_complete_operation_deploy PASSED [ 67%]
tests/test_validator.py::TestBRC20Validator::test_validate_mint_overflow_exact_case PASSED [ 67%]
tests/test_validator.py::TestBRC20Validator::test_validate_mint_overflow_just_under_limit PASSED [ 68%]
tests/test_validator.py::TestBRC20Validator::test_validate_mint_overflow_at_limit PASSED [ 68%]
tests/test_validator.py::TestBRC20Validator::test_get_total_minted_calculation PASSED [ 68%]
tests/test_validator.py::TestBRC20Validator::test_get_total_minted_no_mints PASSED [ 68%]
tests/unit/services/test_bitcoin_rpc.py::test_constructor_missing_url PASSED [ 68%]
tests/unit/services/test_bitcoin_rpc.py::test_constructor_missing_user PASSED [ 69%]
tests/unit/services/test_bitcoin_rpc.py::test_constructor_missing_password PASSED [ 69%]
tests/unit/services/test_bitcoin_rpc.py::test_constructor_placeholder_password PASSED [ 69%]
tests/unit/services/test_bitcoin_rpc.py::test_constructor_url_with_at PASSED [ 69%]
tests/unit/services/test_bitcoin_rpc.py::test_is_connection_error_all_indicators PASSED [ 69%]
tests/unit/services/test_bitcoin_rpc.py::test_is_connection_error_negative PASSED [ 69%]
tests/unit/services/test_bitcoin_rpc.py::test_force_reconnect_sets_rpc_none_and_logs PASSED [ 70%]
tests/unit/services/test_bitcoin_rpc.py::test_health_check_healthy PASSED [ 70%]
tests/unit/services/test_bitcoin_rpc.py::test_health_check_interval PASSED [ 70%]
tests/unit/services/test_bitcoin_rpc.py::test_health_check_unhealthy PASSED [ 70%]
tests/unit/services/test_bitcoin_rpc.py::test_health_check_degraded PASSED [ 70%]
tests/unit/services/test_bitcoin_rpc.py::test_get_rpc_connection_healthy PASSED [ 70%]
tests/unit/services/test_bitcoin_rpc.py::test_get_rpc_connection_failed_reconnect PASSED [ 71%]
tests/unit/services/test_bitcoin_rpc.py::test_get_rpc_connection_auth_error PASSED [ 71%]
tests/unit/services/test_bitcoin_rpc.py::test_get_rpc_connection_connection_refused PASSED [ 71%]
tests/unit/services/test_bitcoin_rpc.py::test_get_rpc_connection_generic_error PASSED [ 71%]
tests/unit/services/test_bitcoin_rpc.py::test_get_connection_status_all_states PASSED [ 71%]
tests/unit/services/test_bitcoin_rpc.py::test_get_best_block_hash_success PASSED [ 71%]
tests/unit/services/test_bitcoin_rpc.py::test_get_best_block_hash_jsonrpc_exception PASSED [ 72%]
tests/unit/services/test_bitcoin_rpc.py::test_get_block_count_success PASSED [ 72%]
tests/unit/services/test_bitcoin_rpc.py::test_get_block_count_jsonrpc_exception PASSED [ 72%]
tests/unit/services/test_bitcoin_rpc.py::test_get_block_success PASSED   [ 72%]
tests/unit/services/test_bitcoin_rpc.py::test_get_block_jsonrpc_exception PASSED [ 72%]
tests/unit/services/test_bitcoin_rpc.py::test_get_block_by_height_success PASSED [ 73%]
tests/unit/services/test_bitcoin_rpc.py::test_get_block_by_height_jsonrpc_exception PASSED [ 73%]
tests/unit/services/test_bitcoin_rpc.py::test_get_raw_transaction_success PASSED [ 73%]
tests/unit/services/test_bitcoin_rpc.py::test_get_raw_transaction_jsonrpc_exception PASSED [ 73%]
tests/unit/services/test_bitcoin_rpc.py::test_decode_raw_transaction_success PASSED [ 73%]
tests/unit/services/test_bitcoin_rpc.py::test_decode_raw_transaction_jsonrpc_exception PASSED [ 73%]
tests/unit/services/test_bitcoin_rpc.py::test_get_block_hash_success PASSED [ 74%]
tests/unit/services/test_bitcoin_rpc.py::test_get_block_hash_jsonrpc_exception PASSED [ 74%]
tests/unit/services/test_bitcoin_rpc.py::test_get_blockchain_info_success PASSED [ 74%]
tests/unit/services/test_bitcoin_rpc.py::test_get_network_info_success PASSED [ 74%]
tests/unit/services/test_bitcoin_rpc.py::test_test_connection_success PASSED [ 74%]
tests/unit/services/test_bitcoin_rpc.py::test_test_connection_failure PASSED [ 74%]
tests/unit/services/test_bitcoin_rpc.py::test_is_mainnet_true PASSED     [ 75%]
tests/unit/services/test_bitcoin_rpc.py::test_is_mainnet_false PASSED    [ 75%]
tests/unit/services/test_bitcoin_rpc.py::test_close_sets_rpc_none PASSED [ 75%]
tests/unit/services/test_bitcoin_rpc.py::test_reset_connection_sets_rpc_none PASSED [ 75%]
tests/unit/services/test_bitcoin_rpc.py::test_retry_on_rpc_error_retries_and_raises PASSED [ 75%]
tests/unit/services/test_bitcoin_rpc.py::test_retry_on_rpc_error_succeeds_after_retry PASSED [ 76%]
tests/unit/services/test_bitcoin_rpc.py::test_retry_on_rpc_error_jsonrpc_exception PASSED [ 76%]
tests/unit/services/test_bitcoin_rpc.py::test_caplog_structlog_diagnostics PASSED [ 76%]
tests/unit/services/test_cache_service.py::test_get_cache_hit PASSED     [ 76%]
tests/unit/services/test_cache_service.py::test_get_cache_miss PASSED    [ 76%]
tests/unit/services/test_cache_service.py::test_get_cache_error PASSED   [ 76%]
tests/unit/services/test_cache_service.py::test_set_cache_success PASSED [ 77%]
tests/unit/services/test_cache_service.py::test_set_cache_error PASSED   [ 77%]
tests/unit/services/test_cache_service.py::test_delete_cache_success PASSED [ 77%]
tests/unit/services/test_cache_service.py::test_delete_cache_miss PASSED [ 77%]
tests/unit/services/test_cache_service.py::test_delete_cache_error PASSED [ 77%]
tests/unit/services/test_cache_service.py::test_generate_key PASSED      [ 77%]
tests/unit/services/test_calculation_service.py::test_get_all_tickers_with_stats_success PASSED [ 78%]
tests/unit/services/test_calculation_service.py::test_get_all_tickers_with_stats_error PASSED [ 78%]
tests/unit/services/test_calculation_service.py::test_get_ticker_stats_success PASSED [ 78%]
tests/unit/services/test_calculation_service.py::test_get_ticker_stats_not_found PASSED [ 78%]
tests/unit/services/test_calculation_service.py::test_get_ticker_stats_error PASSED [ 78%]
tests/unit/services/test_calculation_service.py::test_get_ticker_holders_success PASSED [ 78%]
tests/unit/services/test_calculation_service.py::test_get_ticker_holders_error PASSED [ 79%]
tests/unit/services/test_calculation_service.py::test_get_ticker_transactions_success PASSED [ 79%]
tests/unit/services/test_calculation_service.py::test_get_ticker_transactions_error PASSED [ 79%]
tests/unit/test_bitcoin.py::test_get_script_type[6a0142-op_return] PASSED [ 79%]
tests/unit/test_bitcoin.py::test_get_script_type[76a91489abcdefabbaabbaabbaabbaabbaabbaabbaabba88ac-p2pkh] PASSED [ 79%]
tests/unit/test_bitcoin.py::test_get_script_type[a91489abcdefabbaabbaabbaabbaabbaabbaabbaabba87-p2sh] PASSED [ 80%]
tests/unit/test_bitcoin.py::test_get_script_type[001489abcdefabbaabbaabbaabbaabbaabbaabbaabba-p2wpkh] PASSED [ 80%]
tests/unit/test_bitcoin.py::test_get_script_type[00208989898989898989898989898989898989898989898989898989898989898989-p2wsh] PASSED [ 80%]
tests/unit/test_bitcoin.py::test_get_script_type[51208989898989898989898989898989898989898989898989898989898989898989-p2tr] PASSED [ 80%]
tests/unit/test_bitcoin.py::test_get_script_type[deadbeef-unknown] PASSED [ 80%]
tests/unit/test_bitcoin.py::test_get_script_type[-unknown] PASSED        [ 80%]
tests/unit/test_bitcoin.py::test_extract_address_from_script_p2pkh PASSED [ 81%]
tests/unit/test_bitcoin.py::test_extract_address_from_script_p2sh PASSED [ 81%]
tests/unit/test_bitcoin.py::test_extract_address_from_script_p2wpkh PASSED [ 81%]
tests/unit/test_bitcoin.py::test_extract_address_from_script_p2wsh PASSED [ 81%]
tests/unit/test_bitcoin.py::test_extract_address_from_script_p2tr PASSED [ 81%]
tests/unit/test_bitcoin.py::test_extract_address_from_script_invalid PASSED [ 81%]
tests/unit/test_bitcoin.py::test_is_op_return_script_true PASSED         [ 82%]
tests/unit/test_bitcoin.py::test_is_op_return_script_false PASSED        [ 82%]
tests/unit/test_bitcoin.py::test_is_standard_output[76a91489abcdefabbaabbaabbaabbaabbaabbaabbaabba88ac-True] PASSED [ 82%]
tests/unit/test_bitcoin.py::test_is_standard_output[a91489abcdefabbaabbaabbaabbaabbaabbaabbaabba87-True] PASSED [ 82%]
tests/unit/test_bitcoin.py::test_is_standard_output[001489abcdefabbaabbaabbaabbaabbaabbaabbaabba-True] PASSED [ 82%]
tests/unit/test_bitcoin.py::test_is_standard_output[00208989898989898989898989898989898989898989898989898989898989898989-True] PASSED [ 83%]
tests/unit/test_bitcoin.py::test_is_standard_output[51208989898989898989898989898989898989898989898989898989898989898989-True] PASSED [ 83%]
tests/unit/test_bitcoin.py::test_is_standard_output[6a0142-False] PASSED [ 83%]
tests/unit/test_bitcoin.py::test_is_standard_output[deadbeef-False] PASSED [ 83%]
tests/unit/test_bitcoin.py::test_is_standard_output[-False] PASSED       [ 83%]
tests/unit/test_bitcoin.py::test_extract_op_return_data_pushdata PASSED  [ 83%]
tests/unit/test_bitcoin.py::test_extract_op_return_data_pushdata1 PASSED [ 84%]
tests/unit/test_bitcoin.py::test_extract_op_return_data_pushdata2 PASSED [ 84%]
tests/unit/test_bitcoin.py::test_extract_op_return_data_pushdata4 PASSED [ 84%]
tests/unit/test_bitcoin.py::test_extract_op_return_data_invalid PASSED   [ 84%]
tests/unit/test_bitcoin.py::test_extract_sighash_type_valid PASSED       [ 84%]
tests/unit/test_bitcoin.py::test_extract_sighash_type_invalid PASSED     [ 84%]
tests/unit/test_bitcoin.py::test_is_sighash_single_anyonecanpay_true PASSED [ 85%]
tests/unit/test_bitcoin.py::test_is_sighash_single_anyonecanpay_false PASSED [ 85%]
tests/unit/test_bitcoin.py::test_extract_signature_from_input_segwit PASSED [ 85%]
tests/unit/test_bitcoin.py::test_extract_signature_from_input_legacy PASSED [ 85%]
tests/unit/test_bitcoin.py::test_extract_signature_from_input_none PASSED [ 85%]
tests/unit/test_crypto.py::test_is_valid_bitcoin_address[1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa-True] PASSED [ 85%]
tests/unit/test_crypto.py::test_is_valid_bitcoin_address[3J98t1WpEZ73CNmQviecrnyiWrnqRhWNLy-True] PASSED [ 86%]
tests/unit/test_crypto.py::test_is_valid_bitcoin_address[bc1qw508d6qejxtdg4y5r3zarvary0c5xw7kygt080-True] PASSED [ 86%]
tests/unit/test_crypto.py::test_is_valid_bitcoin_address[bc1qrp33g0q5c5txsp9arysrx4k6zdkfs4n0a6v4a5-True] PASSED [ 86%]
tests/unit/test_crypto.py::test_is_valid_bitcoin_address[bc1p5cyxnuxmeuwuvkwfem96lxxss9r9ux0f4d7xw6z0a6v4a5-True] PASSED [ 86%]
tests/unit/test_crypto.py::test_is_valid_bitcoin_address[mipcBbFg9gMiCh81Kj8tqqdgoZub1ZJRfn-True] PASSED [ 86%]
tests/unit/test_crypto.py::test_is_valid_bitcoin_address[2NBFNJTktNa7GZusGbDbGKRZTxdK9VVez3n-True] PASSED [ 87%]
tests/unit/test_crypto.py::test_is_valid_bitcoin_address[tb1qfm6a6v4a5w7kygt080-True] PASSED [ 87%]
tests/unit/test_crypto.py::test_is_valid_bitcoin_address[x1qw508d6qejxtdg4y5r3zarvary0c5xw7kygt080-False] PASSED [ 87%]
tests/unit/test_crypto.py::test_is_valid_bitcoin_address[12345-False] PASSED [ 87%]
tests/unit/test_crypto.py::test_is_valid_bitcoin_address[1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfN-False] PASSED [ 87%]
tests/unit/test_crypto.py::test_is_valid_bitcoin_address[-False] PASSED  [ 87%]
tests/unit/test_crypto.py::test_extract_address_from_script_p2pkh PASSED [ 88%]
tests/unit/test_crypto.py::test_extract_address_from_script_p2sh PASSED  [ 88%]
tests/unit/test_crypto.py::test_extract_address_from_script_p2wpkh PASSED [ 88%]
tests/unit/test_crypto.py::test_extract_address_from_script_p2wsh PASSED [ 88%]
tests/unit/test_crypto.py::test_extract_address_from_script_p2tr PASSED  [ 88%]
tests/unit/test_crypto.py::test_extract_address_from_script_invalid PASSED [ 88%]
tests/unit/test_crypto.py::test_is_op_return_script_true PASSED          [ 89%]
tests/unit/test_crypto.py::test_is_op_return_script_false PASSED         [ 89%]
tests/unit/test_crypto.py::test_extract_op_return_data_pushdata PASSED   [ 89%]
tests/unit/test_crypto.py::test_extract_op_return_data_pushdata1 PASSED  [ 89%]
tests/unit/test_crypto.py::test_extract_op_return_data_pushdata2 PASSED  [ 89%]
tests/unit/test_crypto.py::test_extract_op_return_data_pushdata4 PASSED  [ 90%]
tests/unit/test_crypto.py::test_extract_op_return_data_invalid PASSED    [ 90%]
tests/unit/test_main.py::test_main_continuous_true PASSED                [ 90%]
tests/unit/test_main.py::test_main_continuous_false PASSED               [ 90%]
tests/unit/test_main.py::test_main_exception_handling PASSED             [ 90%]
tests/unit/test_main.py::test_main_logger_configured PASSED              [ 90%]
tests/unit/test_monitoring.py::test_record_block_processed_success PASSED [ 91%]
tests/unit/test_monitoring.py::test_record_block_processed_error PASSED  [ 91%]
tests/unit/test_monitoring.py::test_record_block_processed_exception PASSED [ 91%]
tests/unit/test_monitoring.py::test_record_operation_processed_valid PASSED [ 91%]
tests/unit/test_monitoring.py::test_record_operation_processed_invalid PASSED [ 91%]
tests/unit/test_monitoring.py::test_record_operation_processed_exception PASSED [ 91%]
tests/unit/test_monitoring.py::test_record_query_time_fast PASSED        [ 92%]
tests/unit/test_monitoring.py::test_record_query_time_slow PASSED        [ 92%]
tests/unit/test_monitoring.py::test_record_query_time_exception PASSED   [ 92%]
tests/unit/test_monitoring.py::test_add_warning_and_error PASSED         [ 92%]
tests/unit/test_monitoring.py::test_get_health_status PASSED             [ 92%]
tests/unit/test_monitoring.py::test_get_performance_metrics PASSED       [ 92%]
tests/unit/test_monitoring.py::test_get_database_metrics PASSED          [ 93%]
tests/unit/test_monitoring.py::test_export_metrics PASSED                [ 93%]
tests/unit/test_monitoring.py::test_get_sync_status PASSED               [ 93%]
tests/unit/test_monitoring.py::test_log_system_info PASSED               [ 93%]
tests/unit/test_monitoring.py::test_reset_metrics PASSED                 [ 93%]
tests/unit/test_opi_api.py::TestOpiApi::test_list_opis_success[postgresql] PASSED [ 94%]
tests/unit/test_opi_api.py::TestOpiApi::test_get_opi_info_success[postgresql] PASSED [ 94%]
tests/unit/test_opi_api.py::TestOpiApi::test_get_opi_info_not_found[postgresql] PASSED [ 94%]
tests/unit/test_opi_api.py::TestOpiApi::test_get_opi_operations_success[postgresql] PASSED [ 94%]
tests/unit/test_opi_api.py::TestOpiApi::test_get_opi_operations_not_found[postgresql] PASSED [ 94%]
tests/unit/test_opi_api.py::TestOpiApi::test_get_opi_operations_empty[postgresql] PASSED [ 94%]
tests/unit/test_opi_api.py::TestOpiApi::test_get_legacy_transfers_success[postgresql] PASSED [ 95%]
tests/unit/test_opi_api.py::TestOpiApi::test_get_legacy_transfers_not_found[postgresql] PASSED [ 95%]
tests/unit/test_opi_api.py::TestOpiApi::test_get_legacy_transfers_empty[postgresql] PASSED [ 95%]
tests/unit/test_opi_api.py::TestOpiApi::test_case_sensitivity_handling[postgresql] PASSED [ 95%]
tests/unit/test_opi_api.py::TestOpiApi::test_api_error_handling[postgresql] PASSED [ 95%]
tests/unit/test_opi_processor.py::TestOpiProcessor::test_processor_initialization PASSED [ 95%]
tests/unit/test_opi_processor.py::TestOpiProcessor::test_process_valid_operation PASSED [ 96%]
tests/unit/test_opi_processor.py::TestOpiProcessor::test_process_invalid_operation PASSED [ 96%]
tests/unit/test_opi_processor.py::TestOpiProcessor::test_process_operation_with_warnings PASSED [ 96%]
tests/unit/test_opi_processor.py::TestOpiProcessor::test_process_operation_not_found PASSED [ 96%]
tests/unit/test_opi_processor.py::TestOpiProcessor::test_process_operation_exception PASSED [ 96%]
tests/unit/test_opi_processor.py::TestOpiProcessor::test_process_empty_operation_data PASSED [ 97%]
tests/unit/test_opi_processor.py::TestOpiProcessor::test_process_none_operation_data PASSED [ 97%]
tests/unit/test_opi_processor.py::TestOpiProcessor::test_process_operation_without_op_field PASSED [ 97%]
tests/unit/test_opi_processor.py::TestOpiProcessor::test_process_with_state_cleanup PASSED [ 97%]
tests/unit/test_opi_processor.py::TestOpiProcessor::test_cleanup_state PASSED [ 97%]
tests/unit/test_opi_processor.py::TestOpiProcessor::test_validation_result_creation PASSED [ 97%]
tests/unit/test_opi_processor.py::TestOpiProcessor::test_validation_result_empty PASSED [ 98%]
tests/unit/test_services_isolated.py::TestLegacyTokenServiceIsolated::test_check_token_exists_found PASSED [ 98%]
tests/unit/test_services_isolated.py::TestLegacyTokenServiceIsolated::test_check_token_exists_not_found PASSED [ 98%]
tests/unit/test_services_isolated.py::TestLegacyTokenServiceIsolated::test_validate_deploy_against_legacy_existing PASSED [ 98%]
tests/unit/test_services_isolated.py::TestLegacyTokenServiceIsolated::test_validate_deploy_against_legacy_new PASSED [ 98%]
tests/unit/test_services_isolated.py::TestTokenSupplyServiceIsolated::test_update_supply_tracking_new_token PASSED [ 98%]
tests/unit/test_services_isolated.py::TestTokenSupplyServiceIsolated::test_update_supply_tracking_existing_token PASSED [ 99%]
tests/unit/test_services_isolated.py::TestBRC20ValidatorIsolated::test_validate_deploy_success PASSED [ 99%]
tests/unit/test_services_isolated.py::TestBRC20ValidatorIsolated::test_validate_deploy_legacy_blocked PASSED [ 99%]
tests/unit/test_services_isolated.py::TestBRC20ValidatorIsolated::test_validate_deploy_legacy_allowed_future PASSED [ 99%]
tests/unit/test_services_isolated.py::TestBRC20ValidatorIsolated::test_validate_mint_success PASSED [ 99%]
tests/unit/test_services_isolated.py::TestBRC20ValidatorIsolated::test_validate_transfer_success PASSED [100%]

============================= 571 passed in 20.74s =============================
